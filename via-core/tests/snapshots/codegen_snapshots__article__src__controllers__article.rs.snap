---
source: tests/codegen_snapshots.rs
expression: file.contents
---
// @generated by via-core. DO NOT EDIT BY HAND.
// source: tests/fixtures/article.via

use loco_rs::prelude::*;
use serde_json::json;
use crate::models::{ArticleCreateParams, ArticleUpdateParams};

pub const RESPOND_WITH: &[&str] = &["json"];

pub fn routes() -> Routes {
    Routes::new()
        .prefix("articles/")
        .add("/", get(index))
        .add("/{id}", get(show))
        .add("/", post(create))
        .add("/{id}", put(update))
        .add("/{id}", delete(destroy))
}

pub async fn index(State(_ctx): State<AppContext>) -> Result<Response> {
    format::json(json!({"todo": "Article#index"}))
}

pub async fn show(State(_ctx): State<AppContext>, Path(id): Path<String>) -> Result<Response> {
    format::json(json!({"todo": "Article#show", "id": id}))
}

pub async fn create(State(_ctx): State<AppContext>, Json(payload): Json<ArticleCreateParams>) -> Result<Response> {
    format::json(json!({"todo": "Article#create", "payload": payload}))
}

pub async fn update(State(_ctx): State<AppContext>, Path(id): Path<String>, Json(payload): Json<ArticleUpdateParams>) -> Result<Response> {
    format::json(json!({"todo": "Article#update", "id": id, "payload": payload}))
}

pub async fn destroy(State(_ctx): State<AppContext>, Path(id): Path<String>) -> Result<Response> {
    format::json(json!({"todo": "Article#destroy", "id": id}))
}

// Associated model fields
// - title: String
// - body: Option<String>
// - published_at: Option<String> (ISO 8601 DateTime string; swap for chrono if desired)
// - author_name: String
